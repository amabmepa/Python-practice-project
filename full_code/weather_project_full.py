# -*- coding: utf-8 -*-
"""Untitled0.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1CNF_3KZ1CiCHcZgnlNJiqEMO9q3c1PE7
"""

import requests
import matplotlib.pyplot as plt

# Ú©Ù„Ø§Ø³ Ø§ØµÙ„ÛŒ
class WeatherApp:
    def __init__(self, city):
        self.city = city
        self.api_key = "cea9d848ea14a07e93c210e93b2eb1c8"
        self.url = (
            f"https://api.openweathermap.org/data/2.5/weather"
            f"?q={city}&appid={self.api_key}&units=metric&lang=fa"
        )

    def get_weather_data(self):
        response = requests.get(self.url)
        return response.json()

# ØªØ§Ø¨Ø¹ Ø±Ø³Ù… Ù†Ù…ÙˆØ¯Ø§Ø±
def plot_temperature(city, temperature):
    plt.figure()
    plt.bar([city], [temperature])
    plt.title("Ù†Ù…ÙˆØ¯Ø§Ø± Ø¯Ù…Ø§ÛŒ Ø´Ù‡Ø±")
    plt.xlabel("Ø´Ù‡Ø±")
    plt.ylabel("Ø¯Ù…Ø§ (Â°C)")
    plt.show()

# Ø§Ø¬Ø±Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡
if __name__ == "__main__":
    city_name = input("Ù†Ø§Ù… Ø´Ù‡Ø± Ø±Ø§ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ù…Ø«Ù„Ø§Ù‹ Tehran): ")
    app = WeatherApp(city_name)
    data = app.get_weather_data()

    if str(data.get("cod")) != "200":
        print("âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¢Ø¨â€ŒÙˆÙ‡ÙˆØ§")
        print("Ù¾ÛŒØ§Ù… API:", data.get("message"))
    else:
        temperature = data["main"]["temp"]
        humidity = data["main"]["humidity"]
        description = data["weather"][0]["description"]

        print("ğŸ“ Ø´Ù‡Ø±:", city_name)
        print("ğŸŒ¡ Ø¯Ù…Ø§:", temperature, "Ø¯Ø±Ø¬Ù‡ Ø³Ø§Ù†ØªÛŒâ€ŒÚ¯Ø±Ø§Ø¯")
        print("ğŸ’§ Ø±Ø·ÙˆØ¨Øª:", humidity, "Ø¯Ø±ØµØ¯")
        print("â˜ ÙˆØ¶Ø¹ÛŒØª Ù‡ÙˆØ§:", description)

        plot_temperature(city_name, temperature)